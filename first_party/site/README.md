# Site

The collected works of Jack Bradshaw.

## Release

Hosted on [Firebase](https://firebase.google.com) and released to https://jack-bradshaw.com. The
release process is not automated and must be run manually via
`bazel run //first_party/site:release`.

## User Experience

The site presents the user with five destinations:

1.  Home, which introduces the site.
1.  Gallery, which contains artistic imagery.
1.  Journal, which contains various forms of writing.
1.  Repository, which links to open source software.
1.  About, which provides information about Jack Bradshaw.

Destinations other than Home and About have subpages that filter and sort the content.

## Architecture

The site is statically generated by [Hugo](https://gohugo.io) and has a four-layer structure:

- Static Content ([/first_party/site/static](/first_party/site/static)): Contains raw assets like
  images and documents that are served directly to the user. It also stores the CSS files.
- Data ([/first_party/site/data](/first_party/site/data)): Holds JSON files defining the site's
  structured content and metadata (e.g. gallery items, journal entries, career history). This
  separates content data from presentation logic.
- Content Generators ([/first_party/site/content](/first_party/site/content)): Contains generators
  that declare the pages of the site. These generators instantiate the pages but have minimal
  interaction with the underlying data, and instead delegate data loading to the layouts layer.
- Layouts ([/first_party/site/layouts](/first_party/site/layouts)): Defines the HTML structure and
  presentation logic. Layouts are responsible for integrating data and creating the final HTML
  pages.

The static files contain the content, the metadata files provide additional context and compose the
content into semantic structures, the content generators declare the pages of the site based on the
metadata files, and the layouts produce a final HTML representation of the content/metadata.

### Data Integration

Data integration is split across the content generators and the layouts as follows:

- Content Generators: Declare pages to display via the Hugo `AddPage` command. They do not populate
  the page with data directly; instead, they pass a `key` property that uniquely identifies the data
  associated with the page. Multiple generators exist, and Hugo evaluates each generator once at
  build time. The key property is optional and is omitted for pages that have no parameterization
  (e.g. the home page).
- Layouts: Read the `key` property, retrieve the content/metadata directly, and create the final
  HTML representation. Multiple layouts exist, and Hugo evaluates each layout as many times as
  necessary to generate the declared pages.

For example: The gallery contains a page for every item that displays it in isolation. The generator
declares a page for each item, with the item metadata tag as the key. The gallery item layout file
reads the key and produces HTML to display the item. The content generator is evaluated once, and
the layout is evaluated for every item.

### CSS

CSS is organized using native CSS Layers in
[manifest.css](/first_party/site/static/css/manifest.css) to manage specificity and inheritance:

- Context: Mobile vs. desktop context.
- Primitives: Raw values (hex codes, etc.).
- Theme: Semantic design tokens (colors, spacing).
- Base: Resets and normalization.
- Elements: Styles for bare HTML tags.
- Layouts: Structural patterns (grid, flex).
- Components: Reusable UI widgets (cards, nav).

CSS follows three principles:

1.  Low Coupling: The contents of each file are independent of the contents of other files; for
    example, a component in one file does not apply flexbox styling, regardless of whether it is
    ultimately used in a flexbox. Rulesets defined in the same file are not subject to this
    limitation (e.g. the rulesets in
    [content.css](/first_party/site/static/css/layouts/content.css)).
1.  Semantic Naming: All classes are named after their semantic purpose, not their imperative
    function (e.g. `gallery-section`, not `image-section`).
1.  Non-Literal Values: Literals are defined as variables instead of inline declarations. Raw
    primitives are named in the primitives layer, site-wide variables are declared in theme, and
    file-specific variables are defined with semantic names.

These rules are followed universally across the site.

## Formatting

HTML files in this package and its subpackages are not autoformatted because the formatter is unable
to correctly process HTML files with Go templating.

## Issues

Issues relating to this package and its subpackages are tagged with `site`.

## Contributions

Contributions from third parties are not accepted.
